import json
from pprint import pprint

def generate_exploit_script(file_name, json_data):
	file = open(file_name, 'w')

	file.write('from selenium import webdriver\n\n')

	file.write('browser = webdriver.Firefox()\n\n')

	# login first
	file.write('browser.get("' + json_data['login_url'] + '")\n')
	file.write('print browser.title\n\n')

	file.write('username = browser.find_element_by_name("username")\n')
	file.write('username.send_keys("' + json_data['login_username'] + '")\n')
	file.write('password = browser.find_element_by_name("password")\n')
	file.write('password.send_keys("' + json_data['login_password'] + '")\n')
	file.write('password.submit()\n\n')

	# perform attack operation
	file.write('browser.get("' + json_data['attack_url'] + '")\n\n')

	# file.write('browser.quit()')

	file.close()


counter = 1
with open('phase3_input.json') as data_file:
	data = json.load(data_file)
	# pprint(data)

	for obj in data:
		file_name = 'exploit_script_' + `counter` + '.py'
		generate_exploit_script(file_name, obj)
		counter += 1

